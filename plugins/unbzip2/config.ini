[general]
version={{MFMODULE_VERSION}}
summary=plugin which unbzip2 incoming files and reinject them into the switch plugin
license=BSD
url=http://metwork
maintainer=Fabien MARTY <fabien.marty@gmail.com>
vendor=MetWork
__version=1

[step_main]
cmd_and_args = {{MFDATA_CURRENT_PLUGIN_DIR}}/main.py --config-file={{MFDATA_CURRENT_CONFIG_INI_PATH}} --redis-unix-socket-path={{MFMODULE_RUNTIME_HOME}}/var/redis.socket {{MFDATA_CURRENT_STEP_QUEUE}}

# Directory in which decompressed files will be reinjected.
# By default, decompressed files are reinjected in the switch. Therefore, make
# sure you have a plugin actually using the decompressed files, otherwise, they
# will be moved to the trash.
arg_dest-dir = {{MFDATA_DATA_IN_DIR}}/step.switch.main

# FIXME: configurable
numprocesses = 1
graceful_timeout = 30

switch_logical_condition = ( x['latest.switch.main.system_magic'].startswith(b'bzip2 compressed data') )
switch_use_hardlink = True
